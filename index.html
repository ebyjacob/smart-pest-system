<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Pest Elimination System â€” Technical Overview</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #FAFAF9;
      --surface: #FFFFFF;
      --surface-alt: #F5F3F0;
      --border: #E8E4DF;
      --border-strong: #D1CBC4;
      --text: #1C1917;
      --text-secondary: #78716C;
      --text-muted: #A8A29E;
      --accent: #B45309;
      --accent-light: #FEF3C7;
      --accent-mid: #F59E0B;
      --red: #DC2626;
      --red-light: #FEF2F2;
      --green: #16A34A;
      --green-light: #F0FDF4;
      --blue: #2563EB;
      --blue-light: #EFF6FF;
      --purple: #7C3AED;
      --purple-light: #F5F3FF;
      --radius: 10px;
      --shadow: 0 1px 3px rgba(28,25,23,0.06), 0 1px 2px rgba(28,25,23,0.04);
      --shadow-md: 0 4px 12px rgba(28,25,23,0.08), 0 2px 4px rgba(28,25,23,0.04);
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(16px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulse-ring {
      0% { transform: scale(1); opacity: 0.6; }
      100% { transform: scale(1.8); opacity: 0; }
    }
    @keyframes spin-slow {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes dash-flow {
      to { stroke-dashoffset: 0; }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    const cx = (...classes) => classes.filter(Boolean).join(' ');
    const TABS = ['Overview', 'Trap Unit', 'Detection', 'Floor Plan', 'Kill Methods'];

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tab Button â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function TabButton({ label, active, onClick, index }) {
      return (
        <button
          onClick={onClick}
          style={{
            fontFamily: "'DM Sans', sans-serif",
            fontSize: 13,
            fontWeight: active ? 700 : 500,
            color: active ? 'var(--accent)' : 'var(--text-secondary)',
            background: active ? 'var(--accent-light)' : 'transparent',
            border: `1.5px solid ${active ? 'var(--accent)' : 'var(--border)'}`,
            padding: '8px 18px',
            borderRadius: 24,
            cursor: 'pointer',
            transition: 'all 0.25s ease',
            whiteSpace: 'nowrap',
          }}
        >
          {label}
        </button>
      );
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Section Card â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function Card({ children, style }) {
      return (
        <div style={{
          background: 'var(--surface)',
          border: '1px solid var(--border)',
          borderRadius: 'var(--radius)',
          padding: 24,
          boxShadow: 'var(--shadow)',
          ...style
        }}>
          {children}
        </div>
      );
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Stat Box â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function Stat({ label, value, sub, color }) {
      return (
        <div style={{ textAlign: 'center' }}>
          <div style={{ fontSize: 11, textTransform: 'uppercase', letterSpacing: 1.2, color: 'var(--text-muted)', fontWeight: 600, marginBottom: 4 }}>{label}</div>
          <div style={{ fontSize: 26, fontWeight: 700, fontFamily: "'JetBrains Mono', monospace", color: color || 'var(--text)' }}>{value}</div>
          {sub && <div style={{ fontSize: 12, color: 'var(--text-secondary)', marginTop: 2 }}>{sub}</div>}
        </div>
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â• 1. OVERVIEW â•â•â•â•â•â•â•â•â•â•â• */
    function OverviewTab() {
      const [active, setActive] = useState(0);
      useEffect(() => {
        const t = setInterval(() => setActive(a => (a + 1) % 5), 3000);
        return () => clearInterval(t);
      }, []);

      const layers = [
        { label: 'SENSE', icon: 'ğŸ‘ï¸', desc: 'PIR + IR Camera + Sound Sensor', detail: 'Low-power PIR triggers camera wake-up. Thermal anomaly 26â€“32Â°C initiates detection pipeline.', color: 'var(--blue)', bg: 'var(--blue-light)' },
        { label: 'IDENTIFY', icon: 'ğŸ§ ', desc: 'NVIDIA Jetson + YOLOv8-nano CNN', detail: 'Edge inference <15ms/frame. Species classification with configurable confidence threshold (default 95%).', color: 'var(--purple)', bg: 'var(--purple-light)' },
        { label: 'DECIDE', icon: 'âš–ï¸', desc: 'Multi-sensor Fusion + Safety Interlock', detail: 'Minimum 2 sensors must agree. Wide-angle thermal confirms no pets/humans. BLE pet collar geofencing.', color: 'var(--accent)', bg: 'var(--accent-light)' },
        { label: 'ELIMINATE', icon: 'âš¡', desc: 'EF Grid â†’ Heat â†’ Plasma â†’ Vacuum', detail: 'Cascading 3-layer kill sequence. Primary: 1.4kV grid (instant). Secondary: 70Â°C heat (90s). Tertiary: CAP.', color: 'var(--red)', bg: 'var(--red-light)' },
        { label: 'REPORT', icon: 'ğŸ“Š', desc: 'MQTT â†’ Dashboard + Mobile Alerts', detail: 'Kill photo + timestamp + sensor data transmitted. Predictive analytics for infestation risk scoring.', color: 'var(--green)', bg: 'var(--green-light)' },
      ];

      return (
        <div>
          <h2 style={{ fontSize: 20, fontWeight: 700, marginBottom: 4 }}>System Architecture</h2>
          <p style={{ color: 'var(--text-secondary)', fontSize: 14, marginBottom: 20 }}>Five-layer autonomous pipeline from detection to reporting. Total latency: &lt;3 seconds.</p>

          <div style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>
            {layers.map((l, i) => {
              const isActive = active === i;
              return (
                <div
                  key={i}
                  onClick={() => setActive(i)}
                  style={{
                    display: 'flex', alignItems: 'flex-start', gap: 16,
                    padding: '16px 20px',
                    background: isActive ? l.bg : 'var(--surface)',
                    border: `1.5px solid ${isActive ? l.color : 'var(--border)'}`,
                    borderRadius: 'var(--radius)',
                    cursor: 'pointer',
                    transition: 'all 0.3s ease',
                    boxShadow: isActive ? 'var(--shadow-md)' : 'none',
                  }}
                >
                  {/* Step indicator */}
                  <div style={{
                    width: 36, height: 36, borderRadius: '50%',
                    background: isActive ? l.color : 'var(--surface-alt)',
                    color: isActive ? '#fff' : 'var(--text-muted)',
                    display: 'flex', alignItems: 'center', justifyContent: 'center',
                    fontSize: 16, fontWeight: 700, fontFamily: "'JetBrains Mono'",
                    flexShrink: 0, transition: 'all 0.3s',
                  }}>
                    {isActive ? l.icon : `0${i + 1}`}
                  </div>
                  <div style={{ flex: 1 }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 2 }}>
                      <span style={{ fontFamily: "'JetBrains Mono'", fontWeight: 600, fontSize: 13, color: isActive ? l.color : 'var(--text)' }}>{l.label}</span>
                      <span style={{ fontSize: 12, color: 'var(--text-secondary)' }}>{l.desc}</span>
                    </div>
                    {isActive && (
                      <p style={{ fontSize: 13, color: 'var(--text-secondary)', marginTop: 6, lineHeight: 1.5, animation: 'fadeUp 0.3s ease' }}>{l.detail}</p>
                    )}
                  </div>
                  {/* Connection line */}
                  {i < 4 && (
                    <div style={{
                      position: 'relative',
                      width: 2,
                      background: active > i ? l.color : 'var(--border)',
                      transition: 'background 0.3s',
                    }} />
                  )}
                </div>
              );
            })}
          </div>
        </div>
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â• 2. TRAP UNIT â•â•â•â•â•â•â•â•â•â•â• */
    function TrapUnitTab() {
      const [phase, setPhase] = useState(0);
      const phases = ['Standby', 'Detected', 'Entering', 'Kill', 'Report'];
      const phaseColors = ['var(--text-muted)', 'var(--blue)', 'var(--accent)', 'var(--red)', 'var(--green)'];

      useEffect(() => {
        const t = setInterval(() => setPhase(p => (p + 1) % 5), 2800);
        return () => clearInterval(t);
      }, []);

      return (
        <div>
          <h2 style={{ fontSize: 20, fontWeight: 700, marginBottom: 4 }}>Smart Trap Unit â€” Cross-Section</h2>
          <p style={{ color: 'var(--text-secondary)', fontSize: 14, marginBottom: 16 }}>Animated operation sequence showing the full detect â†’ capture â†’ eliminate cycle.</p>

          {/* Phase indicators */}
          <div style={{ display: 'flex', gap: 6, marginBottom: 20, flexWrap: 'wrap' }}>
            {phases.map((ph, i) => (
              <span key={i} style={{
                fontSize: 12, fontWeight: 600, padding: '5px 14px', borderRadius: 20,
                fontFamily: "'JetBrains Mono'",
                background: phase === i ? phaseColors[i] : 'transparent',
                color: phase === i ? '#fff' : 'var(--text-muted)',
                border: `1.5px solid ${phase === i ? phaseColors[i] : 'var(--border)'}`,
                transition: 'all 0.3s',
              }}>{ph}</span>
            ))}
          </div>

          <svg viewBox="0 0 720 420" style={{ width: '100%', background: 'var(--surface)', borderRadius: 'var(--radius)', border: '1px solid var(--border)' }}>
            <defs>
              <linearGradient id="housing" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stopColor="#F5F3F0" />
                <stop offset="100%" stopColor="#E8E4DF" />
              </linearGradient>
            </defs>

            {/* Housing */}
            <rect x="60" y="30" width="600" height="340" rx="12" fill="url(#housing)" stroke={phaseColors[phase]} strokeWidth="2" style={{ transition: 'stroke 0.3s' }} />
            <text x="80" y="55" fill="#A8A29E" fontSize="10" fontFamily="JetBrains Mono" fontWeight="500">HOUSING â€” ABS/Steel Â· IP54 Â· 280Ã—180Ã—60mm</text>

            {/* Camera Module */}
            <rect x="80" y="70" width="110" height="60" rx="8" fill="#fff" stroke={phase >= 1 ? '#2563EB' : '#D1CBC4'} strokeWidth="1.5" style={{ transition: 'stroke 0.3s' }} />
            <circle cx="135" cy="96" r="14" fill={phase >= 1 ? '#EFF6FF' : '#F5F3F0'} stroke={phase >= 1 ? '#2563EB' : '#D1CBC4'} strokeWidth="1.5" />
            <circle cx="135" cy="96" r="6" fill={phase >= 1 ? '#2563EB' : '#D1CBC4'} />
            {phase >= 1 && <circle cx="135" cy="96" r="20" fill="none" stroke="#2563EB" strokeWidth="1" opacity="0.4">
              <animate attributeName="r" values="14;24;14" dur="1.8s" repeatCount="indefinite" />
              <animate attributeName="opacity" values="0.5;0;0.5" dur="1.8s" repeatCount="indefinite" />
            </circle>}
            <text x="88" y="148" fill="#2563EB" fontSize="9" fontFamily="JetBrains Mono" fontWeight="600">IR Camera</text>
            <text x="88" y="160" fill="#A8A29E" fontSize="8" fontFamily="JetBrains Mono">YOLOv8 @30fps</text>

            {/* PIR */}
            <rect x="210" y="70" width="80" height="60" rx="8" fill="#fff" stroke={phase === 1 ? '#16A34A' : '#D1CBC4'} strokeWidth="1.5" />
            <path d="M230 96 Q250 80 270 96 Q250 112 230 96" fill="none" stroke={phase === 1 ? '#16A34A' : '#D1CBC4'} strokeWidth="2" />
            <text x="218" y="148" fill="#16A34A" fontSize="9" fontFamily="JetBrains Mono" fontWeight="600">PIR Sensor</text>
            <text x="218" y="160" fill="#A8A29E" fontSize="8" fontFamily="JetBrains Mono">Motion trigger</text>

            {/* Jetson */}
            <rect x="310" y="70" width="110" height="60" rx="8" fill="#fff" stroke="#7C3AED" strokeWidth="1.5" />
            <rect x="322" y="82" width="86" height="36" rx="4" fill="#F5F3FF" stroke="#7C3AED" strokeWidth="1" />
            <text x="340" y="100" fill="#7C3AED" fontSize="8" fontWeight="700" fontFamily="JetBrains Mono">NVIDIA</text>
            <text x="334" y="112" fill="#78716C" fontSize="7" fontFamily="JetBrains Mono">Jetson Orin Nano</text>
            <text x="318" y="148" fill="#7C3AED" fontSize="9" fontFamily="JetBrains Mono" fontWeight="600">Edge Compute</text>
            <text x="318" y="160" fill="#A8A29E" fontSize="8" fontFamily="JetBrains Mono">CNN Inference</text>

            {/* Comms */}
            <rect x="440" y="70" width="100" height="60" rx="8" fill="#fff" stroke="#B45309" strokeWidth="1.5" />
            <text x="475" y="98" textAnchor="middle" fontSize="18">ğŸ“¡</text>
            <text x="475" y="114" textAnchor="middle" fill="#B45309" fontSize="8" fontFamily="JetBrains Mono">WiFi / LoRa</text>
            <text x="448" y="148" fill="#B45309" fontSize="9" fontFamily="JetBrains Mono" fontWeight="600">Comms</text>
            <text x="448" y="160" fill="#A8A29E" fontSize="8" fontFamily="JetBrains Mono">MQTT Telemetry</text>

            {/* Safety */}
            <rect x="560" y="70" width="80" height="60" rx="8" fill={phase === 3 ? '#F0FDF4' : '#fff'} stroke="#16A34A" strokeWidth="1.5" />
            <text x="600" y="96" textAnchor="middle" fontSize="16">{phase === 3 ? 'âœ…' : 'ğŸ”’'}</text>
            <text x="600" y="114" textAnchor="middle" fill="#16A34A" fontSize="8" fontFamily="JetBrains Mono" fontWeight="600">SAFE</text>
            <text x="568" y="148" fill="#16A34A" fontSize="9" fontFamily="JetBrains Mono" fontWeight="600">Interlock</text>
            <text x="568" y="160" fill="#A8A29E" fontSize="8" fontFamily="JetBrains Mono">Fail-safe</text>

            {/* Entry Tunnel */}
            <rect x="80" y="185" width="70" height="35" rx="6" fill="#FEF3C7" stroke="#B45309" strokeWidth="1" strokeDasharray="5,3" />
            <text x="90" y="207" fill="#B45309" fontSize="9" fontFamily="JetBrains Mono" fontWeight="600">ENTRY</text>
            <polygon points="160,195 180,202 160,210" fill={phase >= 2 ? '#B45309' : '#D1CBC4'} style={{ transition: 'fill 0.3s' }} />

            {/* One-way valve */}
            <rect x="185" y="192" width="30" height="22" rx="3" fill="#fff" stroke="#B45309" strokeWidth="1" />
            <text x="192" y="207" fill="#B45309" fontSize="7" fontFamily="JetBrains Mono" fontWeight="600">1-W</text>

            {/* Kill Chamber */}
            <rect x="225" y="175" width="290" height="170" rx="10" fill={phase === 3 ? '#FEF2F2' : '#FAFAF9'} stroke={phase === 3 ? '#DC2626' : '#D1CBC4'} strokeWidth={phase === 3 ? 2.5 : 1.5} style={{ transition: 'all 0.3s' }} />
            <text x="370" y="197" textAnchor="middle" fill={phase === 3 ? '#DC2626' : '#78716C'} fontSize="12" fontFamily="JetBrains Mono" fontWeight="700">KILL CHAMBER</text>

            {/* EF Grid lines */}
            {[0,1,2,3,4,5].map(i => (
              <line key={`g${i}`} x1={245 + i * 48} y1="210" x2={245 + i * 48} y2="330" stroke={phase === 3 ? '#DC2626' : '#E8E4DF'} strokeWidth="1.5" strokeDasharray="6,4" style={{ transition: 'stroke 0.3s' }} />
            ))}
            <text x="235" y="345" fill={phase === 3 ? '#DC2626' : '#A8A29E'} fontSize="8" fontFamily="JetBrains Mono" fontWeight="500">âš¡ HIGH-VOLTAGE GRID â€” 1.4kV DC Â· &lt;5mA</text>

            {/* Heat element bar */}
            <rect x="235" y="318" width="270" height="12" rx="3" fill={phase === 3 ? '#FEF3C7' : '#F5F3F0'} stroke={phase === 3 ? '#B45309' : '#E8E4DF'} strokeWidth="1" />
            <text x="370" y="328" textAnchor="middle" fill={phase === 3 ? '#B45309' : '#A8A29E'} fontSize="7" fontFamily="JetBrains Mono">ğŸ”¥ IR HEAT â€” 70Â°C target</text>

            {/* Plasma nozzle */}
            <rect x="460" y="215" width="42" height="75" rx="6" fill={phase === 3 ? '#EFF6FF' : '#fff'} stroke={phase === 3 ? '#2563EB' : '#D1CBC4'} strokeWidth="1.5" />
            <text x="466" y="258" fill="#2563EB" fontSize="7" fontFamily="JetBrains Mono" fontWeight="600">CAP</text>
            <text x="464" y="270" fill="#2563EB" fontSize="6" fontFamily="JetBrains Mono">Plasma</text>
            {phase === 3 && [0,1,2,3,4,5].map(i => (
              <circle key={`p${i}`} cx={481 + Math.cos(i*60*Math.PI/180)*15} cy={245 + Math.sin(i*60*Math.PI/180)*15} r="2.5" fill="#2563EB" opacity="0.5">
                <animate attributeName="r" values="2;5;2" dur="1s" begin={`${i*0.15}s`} repeatCount="indefinite" />
                <animate attributeName="opacity" values="0.7;0.1;0.7" dur="1s" begin={`${i*0.15}s`} repeatCount="indefinite" />
              </circle>
            ))}

            {/* Suction fan */}
            <circle cx="370" cy="270" r="24" fill={phase >= 2 ? '#EFF6FF' : '#F5F3F0'} stroke={phase >= 2 ? '#2563EB' : '#D1CBC4'} strokeWidth="1.5" />
            <text x="370" y="275" textAnchor="middle" fontSize="16">{phase >= 2 ? 'ğŸŒ€' : 'â­•'}</text>
            <text x="370" y="303" textAnchor="middle" fill="#2563EB" fontSize="7" fontFamily="JetBrains Mono">SUCTION FAN</text>

            {/* Roach */}
            {(phase === 1 || phase === 2) && (
              <text x={phase === 1 ? 120 : 250} y={202} fontSize="16" style={{ transition: 'all 1s ease-in-out' }}>ğŸª³</text>
            )}

            {/* Bait */}
            <rect x="80" y="235" width="60" height="40" rx="6" fill="#FEF3C7" stroke="#B45309" strokeWidth="1" />
            <text x="88" y="255" fill="#B45309" fontSize="8" fontFamily="JetBrains Mono" fontWeight="600">BAIT</text>
            <text x="84" y="267" fill="#A8A29E" fontSize="7" fontFamily="JetBrains Mono">Pheromone</text>

            {/* Pet sensor */}
            <rect x="560" y="185" width="80" height="50" rx="8" fill="#fff" stroke="#B45309" strokeWidth="1.5" />
            <text x="600" y="210" textAnchor="middle" fontSize="14">ğŸ¾</text>
            <text x="600" y="228" textAnchor="middle" fill="#B45309" fontSize="8" fontFamily="JetBrains Mono" fontWeight="600">Pet Detect</text>

            {/* Waste tray */}
            <rect x="225" y="358" width="290" height="25" rx="5" fill="#F5F3F0" stroke="#D1CBC4" strokeWidth="1" />
            <text x="370" y="375" textAnchor="middle" fill="#A8A29E" fontSize="9" fontFamily="JetBrains Mono">â™»ï¸ Removable Waste Tray</text>

            {/* Specs */}
            <text x="360" y="408" textAnchor="middle" fill="#A8A29E" fontSize="9" fontFamily="JetBrains Mono">280mm Ã— 180mm Ã— 60mm Â· 650g Â· 12V DC / 15W Â· IP54</text>
          </svg>
        </div>
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â• 3. DETECTION FLOW â•â•â•â•â•â•â•â•â•â•â• */
    function DetectionTab() {
      const [step, setStep] = useState(0);
      useEffect(() => {
        const t = setInterval(() => setStep(s => (s + 1) % 8), 2200);
        return () => clearInterval(t);
      }, []);

      const steps = [
        { icon: 'ğŸŒ¡ï¸', label: 'PIR Trigger', detail: 'Body heat signature detected within 3m range. Thermal anomaly 26â€“32Â°C consistent with Blattodea.', time: '0ms', color: 'var(--green)' },
        { icon: 'ğŸ“·', label: 'Camera Wake', detail: 'IR camera module powers on from sleep. Dual-stream IR+RGB capture at 640Ã—480. Power-on latency <200ms.', time: '200ms', color: 'var(--blue)' },
        { icon: 'ğŸ§ ', label: 'ML Classify', detail: 'YOLOv8-nano inference on Jetson Orin Nano. Classes: TARGET_PEST / NON_TARGET / BACKGROUND. Inference <15ms.', time: '215ms', color: 'var(--purple)' },
        { icon: 'ğŸ¾', label: 'Pet/Human Scan', detail: 'Wide-angle thermal confirms no organisms >500g in exclusion zone. BLE pet beacon check. Time-window validation.', time: '250ms', color: 'var(--accent)' },
        { icon: 'âœ…', label: 'Sensor Fusion', detail: 'Minimum 2 independent modalities must agree: (Camera+PIR) OR (Camera+Sound). Reject if ambiguous.', time: '260ms', color: 'var(--green)' },
        { icon: 'ğŸ¯', label: 'Bait Dispense', detail: 'Micro-pump releases 0.5ml aggregation pheromone from sealed cartridge to attract target toward entry tunnel.', time: '500ms', color: 'var(--accent)' },
        { icon: 'ğŸ’€', label: 'Kill Cascade', detail: 'Primary: 1.4kV EF grid (instant). Secondary: 70Â°C IR heat (90s). Tertiary: Cold atmospheric plasma (30s).', time: '1.0s', color: 'var(--red)' },
        { icon: 'ğŸ“Š', label: 'Report & Log', detail: 'Kill photo + timestamp + confidence score + sensor readings transmitted via MQTT to dashboard. Push notification sent.', time: '2.5s', color: 'var(--blue)' },
      ];

      return (
        <div>
          <h2 style={{ fontSize: 20, fontWeight: 700, marginBottom: 4 }}>Detection â†’ Elimination Pipeline</h2>
          <p style={{ color: 'var(--text-secondary)', fontSize: 14, marginBottom: 20 }}>8-step autonomous sequence. End-to-end latency under 3 seconds.</p>

          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))', gap: 10, marginBottom: 20 }}>
            {steps.map((s, i) => {
              const isActive = step === i;
              const isPast = step > i;
              return (
                <div key={i} onClick={() => setStep(i)} style={{
                  padding: '14px 12px',
                  background: isActive ? '#fff' : 'var(--surface-alt)',
                  border: `1.5px solid ${isActive ? s.color : 'var(--border)'}`,
                  borderRadius: 'var(--radius)',
                  cursor: 'pointer',
                  textAlign: 'center',
                  boxShadow: isActive ? 'var(--shadow-md)' : 'none',
                  transition: 'all 0.3s',
                  opacity: isPast ? 0.5 : 1,
                }}>
                  <div style={{ fontSize: 22, marginBottom: 6 }}>{s.icon}</div>
                  <div style={{ fontSize: 11, fontWeight: 600, fontFamily: "'JetBrains Mono'", color: isActive ? s.color : 'var(--text-secondary)' }}>{s.label}</div>
                  <div style={{ fontSize: 10, fontFamily: "'JetBrains Mono'", color: 'var(--text-muted)', marginTop: 4 }}>T+{s.time}</div>
                </div>
              );
            })}
          </div>

          {/* Detail panel */}
          <Card style={{ borderColor: steps[step].color, animation: 'fadeUp 0.3s ease' }}>
            <div style={{ display: 'flex', alignItems: 'center', gap: 12, marginBottom: 10 }}>
              <span style={{ fontSize: 28 }}>{steps[step].icon}</span>
              <div>
                <span style={{ fontFamily: "'JetBrains Mono'", fontWeight: 700, fontSize: 14, color: steps[step].color }}>STEP {step + 1}: </span>
                <span style={{ fontWeight: 600, fontSize: 14 }}>{steps[step].label}</span>
              </div>
              <span style={{ marginLeft: 'auto', fontFamily: "'JetBrains Mono'", fontSize: 12, color: 'var(--text-muted)', background: 'var(--surface-alt)', padding: '4px 10px', borderRadius: 12 }}>T+{steps[step].time}</span>
            </div>
            <p style={{ fontSize: 14, color: 'var(--text-secondary)', lineHeight: 1.6 }}>{steps[step].detail}</p>
          </Card>
        </div>
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â• 4. FLOOR PLAN â•â•â•â•â•â•â•â•â•â•â• */
    function FloorPlanTab() {
      const [showRisk, setShowRisk] = useState(true);
      const [showCoverage, setShowCoverage] = useState(true);
      const [showPipes, setShowPipes] = useState(true);
      const [selected, setSelected] = useState(null);
      const [simTime, setSimTime] = useState(0);
      const [simRunning, setSimRunning] = useState(false);

      /* Simulation auto-advance */
      useEffect(() => {
        if (!simRunning) return;
        if (simTime >= 7) { setSimRunning(false); return; }
        const t = setTimeout(() => setSimTime(s => s + 1), 1200);
        return () => clearTimeout(t);
      }, [simRunning, simTime]);

      const timeline = [
        { t: '0.00s', label: 'PIR Trigger', desc: 'Thermal anomaly 26â€“32Â°C detected by passive infrared sensor within 3m radius', color: '#16A34A', icon: 'ğŸŒ¡ï¸' },
        { t: '0.20s', label: 'Camera Wake', desc: 'IR+RGB dual-stream camera powers on from deep sleep. 640Ã—480 @ 30fps capture begins', color: '#2563EB', icon: 'ğŸ“·' },
        { t: '0.22s', label: 'ML Inference', desc: 'YOLOv8-nano on Jetson Orin Nano classifies species. Confidence threshold â‰¥95%', color: '#7C3AED', icon: 'ğŸ§ ' },
        { t: '0.26s', label: 'Safety Check', desc: 'Wide-angle thermal scans for organisms >500g. BLE pet beacon check. Time-window validated', color: '#B45309', icon: 'ğŸ¾' },
        { t: '0.28s', label: 'Sensor Fusion', desc: 'Minimum 2 modalities agree (Camera+PIR or Camera+Sound). Reject if ambiguous', color: '#16A34A', icon: 'âœ…' },
        { t: '0.50s', label: 'Bait Dispense', desc: 'Micro-pump releases 0.5ml pheromone to guide target toward one-way entry tunnel', color: '#B45309', icon: 'ğŸ¯' },
        { t: '1.00s', label: 'Kill Cascade', desc: 'EF grid 1.4kV (instant) â†’ IR heat 70Â°C (90s) â†’ Cold atmospheric plasma (30s)', color: '#DC2626', icon: 'âš¡' },
        { t: '2.50s', label: 'MQTT Report', desc: 'Kill photo + timestamp + confidence + sensor data â†’ cloud dashboard. Push notification sent', color: '#2563EB', icon: 'ğŸ“Š' },
      ];

      const traps = [
        { id: 'T1', x: 285, y: 190, label: 'Under Sink', fov: 120, reason: 'Adjacent to drain pipe â€” primary cockroach entry point. Warm, dark, humid environment ideal for nesting.' },
        { id: 'T2', x: 530, y: 200, label: 'Behind Fridge', fov: 90, reason: 'Warm compressor exhaust attracts cockroaches. Gap between fridge and wall provides harbourage.' },
        { id: 'T3', x: 115, y: 440, label: 'Near Door', fov: 140, reason: 'External entry point. Cockroaches enter via door gap (â‰¥3mm). High nocturnal traffic zone.' },
      ];

      const F = 'JetBrains Mono';

      return (
        <div>
          <h2 style={{ fontSize: 20, fontWeight: 700, marginBottom: 4 }}>Deployment Floor Plan â€” Kitchen</h2>
          <p style={{ color: 'var(--text-secondary)', fontSize: 14, marginBottom: 14 }}>Typical residential kitchen (4.2m Ã— 3.6m). Click any trap unit for placement rationale. Use the toggles to show/hide overlays.</p>

          {/* Toggle Controls */}
          <div style={{ display: 'flex', gap: 14, marginBottom: 18, flexWrap: 'wrap' }}>
            {[
              ['Risk Zones', showRisk, setShowRisk, '#DC2626'],
              ['PIR Coverage', showCoverage, setShowCoverage, '#2563EB'],
              ['Pipe Routes', showPipes, setShowPipes, '#B45309'],
            ].map(([label, val, setter, col]) => (
              <label key={label} style={{ display: 'flex', alignItems: 'center', gap: 6, fontSize: 13, fontWeight: 600, color: val ? col : 'var(--text-muted)', cursor: 'pointer' }}>
                <input type="checkbox" checked={val} onChange={e => setter(e.target.checked)} style={{ accentColor: col, width: 15, height: 15 }} />
                {label}
              </label>
            ))}
          </div>

          {/* â•â•â•â•â•â•â• SVG FLOOR PLAN â•â•â•â•â•â•â• */}
          <svg viewBox="0 0 680 560" style={{ width: '100%', background: '#FEFDFB', borderRadius: 'var(--radius)', border: '1px solid var(--border)' }}>
            <defs>
              <radialGradient id="covG"><stop offset="0%" stopColor="#2563EB" stopOpacity="0.10" /><stop offset="100%" stopColor="#2563EB" stopOpacity="0" /></radialGradient>
              <radialGradient id="rskG"><stop offset="0%" stopColor="#DC2626" stopOpacity="0.14" /><stop offset="100%" stopColor="#DC2626" stopOpacity="0" /></radialGradient>
              <pattern id="grd" width="25" height="25" patternUnits="userSpaceOnUse"><path d="M25 0L0 0 0 25" fill="none" stroke="#E8E4DF" strokeWidth="0.4"/></pattern>
            </defs>

            {/* â”€â”€ GRID â”€â”€ */}
            <rect x="80" y="65" width="480" height="410" fill="url(#grd)" />

            {/* â•â•â•â•â•â• WALLS (thick architectural style) â•â•â•â•â•â• */}
            <rect x="80" y="65" width="480" height="410" rx="0" fill="none" stroke="#44403C" strokeWidth="6" />
            {/* Inner wall line for thickness effect */}
            <rect x="83" y="68" width="474" height="404" rx="0" fill="none" stroke="#78716C" strokeWidth="1" strokeDasharray="0" />

            {/* â•â•â•â•â•â• DIMENSION LINES â•â•â•â•â•â• */}
            {/* Top: 4.2m */}
            <line x1="80" y1="42" x2="560" y2="42" stroke="#78716C" strokeWidth="1" />
            <line x1="80" y1="36" x2="80" y2="48" stroke="#78716C" strokeWidth="1" />
            <line x1="560" y1="36" x2="560" y2="48" stroke="#78716C" strokeWidth="1" />
            <rect x="260" y="30" width="80" height="18" rx="3" fill="#fff" stroke="#D1CBC4" strokeWidth="0.8" />
            <text x="300" y="43" textAnchor="middle" fill="#44403C" fontSize="11" fontFamily={F} fontWeight="600">4,200 mm</text>

            {/* Left: 3.6m */}
            <line x1="56" y1="65" x2="56" y2="475" stroke="#78716C" strokeWidth="1" />
            <line x1="50" y1="65" x2="62" y2="65" stroke="#78716C" strokeWidth="1" />
            <line x1="50" y1="475" x2="62" y2="475" stroke="#78716C" strokeWidth="1" />
            <text x="54" y="275" textAnchor="middle" fill="#44403C" fontSize="11" fontFamily={F} fontWeight="600" transform="rotate(-90,54,275)">3,600 mm</text>

            {/* â•â•â•â•â•â• COUNTER + CABINETS (north wall) â•â•â•â•â•â• */}
            <rect x="83" y="68" width="200" height="70" fill="#EDEBE8" stroke="#78716C" strokeWidth="1.5" />
            <line x1="150" y1="68" x2="150" y2="138" stroke="#D1CBC4" strokeWidth="1" strokeDasharray="4,3" />
            <text x="116" y="108" textAnchor="middle" fill="#57534E" fontSize="10" fontFamily={F}>Cabinet</text>
            <text x="215" y="108" textAnchor="middle" fill="#57534E" fontSize="10" fontFamily={F}>Cabinet</text>
            {/* Counter dim */}
            <line x1="83" y1="148" x2="283" y2="148" stroke="#A8A29E" strokeWidth="0.6" strokeDasharray="3,3" />
            <text x="183" y="160" textAnchor="middle" fill="#A8A29E" fontSize="9" fontFamily={F}>2,000 mm</text>

            {/* â•â•â•â•â•â• SINK â•â•â•â•â•â• */}
            <rect x="290" y="68" width="85" height="60" rx="12" fill="#DBEAFE" stroke="#78716C" strokeWidth="1.5" />
            <rect x="302" y="78" width="60" height="38" rx="8" fill="#BFDBFE" stroke="#93C5FD" strokeWidth="1.2" />
            <circle cx="352" cy="84" r="4" fill="#78716C" />
            <text x="332" y="68" textAnchor="middle" fill="#2563EB" fontSize="12" fontFamily={F} fontWeight="700" dy="-6">SINK</text>
            <text x="332" y="140" textAnchor="middle" fill="#A8A29E" fontSize="9" fontFamily={F}>850 Ã— 600 mm</text>

            {/* â”€â”€ Drain + pipe â”€â”€ */}
            {showPipes && <>
              <line x1="332" y1="128" x2="332" y2="195" stroke="#B45309" strokeWidth="3" strokeDasharray="8,4" opacity="0.7" />
              <circle cx="332" cy="195" r="10" fill="#FEF3C7" stroke="#B45309" strokeWidth="2" />
              <text x="332" y="199" textAnchor="middle" fill="#B45309" fontSize="9" fontFamily={F} fontWeight="700">D</text>
              <text x="355" y="192" fill="#B45309" fontSize="9" fontFamily={F}>Drain 40âˆ…</text>
              <line x1="332" y1="205" x2="332" y2="475" stroke="#B45309" strokeWidth="1.5" strokeDasharray="6,4" opacity="0.35" />
              <text x="342" y="465" fill="#B45309" fontSize="8" fontFamily={F} opacity="0.5">waste â†’</text>
            </>}

            {/* â•â•â•â•â•â• HOB / STOVE â•â•â•â•â•â• */}
            <rect x="383" y="68" width="90" height="60" fill="#EDEBE8" stroke="#78716C" strokeWidth="1.5" />
            {[0,1,2,3].map(i => <circle key={`h${i}`} cx={403 + (i%2)*50} cy={85 + Math.floor(i/2)*26} r="10" fill="none" stroke="#DC2626" strokeWidth="1.2" opacity="0.45" />)}
            <text x="428" y="68" textAnchor="middle" fill="#57534E" fontSize="12" fontFamily={F} fontWeight="700" dy="-6">HOB</text>
            <text x="428" y="140" textAnchor="middle" fill="#A8A29E" fontSize="9" fontFamily={F}>900 Ã— 600 mm</text>

            {/* â•â•â•â•â•â• FRIDGE â•â•â•â•â•â• */}
            <rect x="480" y="68" width="74" height="135" fill="#EDEBE8" stroke="#78716C" strokeWidth="1.5" />
            <rect x="484" y="72" width="66" height="78" rx="3" fill="#F5F3F0" stroke="#D1CBC4" strokeWidth="0.8" />
            <text x="517" y="115" textAnchor="middle" fill="#57534E" fontSize="11" fontFamily={F} fontWeight="600">Fridge</text>
            <rect x="484" y="155" width="66" height="42" rx="3" fill="#F5F3F0" stroke="#D1CBC4" strokeWidth="0.8" />
            <text x="517" y="180" textAnchor="middle" fill="#57534E" fontSize="10" fontFamily={F}>Freezer</text>
            <text x="517" y="214" textAnchor="middle" fill="#A8A29E" fontSize="9" fontFamily={F}>740 Ã— 600 mm</text>
            {showPipes && <text x="517" y="228" textAnchor="middle" fill="#DC2626" fontSize="8" fontFamily={F}>â†“ warm exhaust</text>}
            {/* Fridge dim line */}
            <line x1="480" y1="210" x2="554" y2="210" stroke="#A8A29E" strokeWidth="0.6" strokeDasharray="3,3" />

            {/* â•â•â•â•â•â• DOOR (west wall) â•â•â•â•â•â• */}
            <rect x="80" y="365" width="6" height="80" fill="#B45309" />
            <path d="M86,365 A80,80 0 0,1 150,420" fill="none" stroke="#B45309" strokeWidth="1.2" strokeDasharray="5,3" />
            <text x="100" y="410" fill="#B45309" fontSize="13" fontFamily={F} fontWeight="700">DOOR</text>
            <text x="100" y="425" fill="#A8A29E" fontSize="10" fontFamily={F}>800 mm</text>
            <text x="100" y="455" fill="#DC2626" fontSize="9" fontFamily={F}>âš  Gap â‰¥ 3mm</text>
            <text x="100" y="467" fill="#DC2626" fontSize="8" fontFamily={F}>(cockroach entry)</text>

            {/* â•â•â•â•â•â• WINDOW (east wall) â•â•â•â•â•â• */}
            <rect x="554" y="250" width="6" height="95" fill="#BFDBFE" stroke="#78716C" strokeWidth="1" />
            <text x="570" y="302" fill="#78716C" fontSize="10" fontFamily={F} transform="rotate(90,570,302)">Window 950 mm</text>

            {/* â•â•â•â•â•â• KICKBOARD VENT â•â•â•â•â•â• */}
            {showPipes && <>
              <rect x="120" y="134" width="35" height="8" fill="#FEF3C7" stroke="#B45309" strokeWidth="1" rx="2" />
              <text x="137" y="155" textAnchor="middle" fill="#B45309" fontSize="8" fontFamily={F}>Vent</text>
            </>}

            {/* â•â•â•â•â•â• POWER OUTLETS â•â•â•â•â•â• */}
            {[{x:200,y:138},{x:554,y:180},{x:86,y:340}].map((p,i) => (
              <g key={`pw${i}`}>
                <rect x={p.x} y={p.y} width="12" height="8" rx="2" fill="#fff" stroke="#78716C" strokeWidth="1" />
                <text x={p.x+6} y={p.y+6} textAnchor="middle" fill="#78716C" fontSize="5" fontFamily={F}>â»</text>
              </g>
            ))}

            {/* â•â•â•â•â•â• RISK ZONES â•â•â•â•â•â• */}
            {showRisk && <>
              <circle cx="332" cy="195" r="100" fill="url(#rskG)" />
              <text x="370" y="260" fill="#DC2626" fontSize="10" fontFamily={F} fontWeight="600" opacity="0.6">HIGH</text>
              <circle cx="517" cy="230" r="80" fill="url(#rskG)" />
              <text x="530" y="280" fill="#DC2626" fontSize="9" fontFamily={F} fontWeight="600" opacity="0.5">MED</text>
              <circle cx="95" cy="405" r="65" fill="url(#rskG)" />
              <text x="130" y="385" fill="#DC2626" fontSize="9" fontFamily={F} fontWeight="600" opacity="0.5">MED</text>
              <circle cx="160" cy="110" r="55" fill="url(#rskG)" />
              <text x="160" y="95" fill="#DC2626" fontSize="8" fontFamily={F} fontWeight="600" opacity="0.4" textAnchor="middle">LOW</text>
            </>}

            {/* â•â•â•â•â•â• PIR COVERAGE â•â•â•â•â•â• */}
            {showCoverage && <>
              {traps.map((t,i) => (
                <g key={`c${i}`}>
                  <circle cx={t.x} cy={t.y} r="105" fill="url(#covG)" />
                  <circle cx={t.x} cy={t.y} r="105" fill="none" stroke="#2563EB" strokeWidth="0.8" strokeDasharray="4,4" opacity="0.3" />
                  <text x={t.x + (i===1 ? -30 : 30)} y={t.y + 85} textAnchor="middle" fill="#2563EB" fontSize="9" fontFamily={F} opacity="0.6">3m PIR</text>
                </g>
              ))}
            </>}

            {/* â•â•â•â•â•â• TRAP UNITS â•â•â•â•â•â• */}
            {traps.map((t,i) => {
              const isSel = selected === i;
              return (
                <g key={t.id} onClick={() => setSelected(isSel ? null : i)} style={{ cursor: 'pointer' }}>
                  <rect x={t.x-28} y={t.y-15} width="56" height="30" rx="6"
                    fill={isSel ? '#FEF2F2' : '#fff'} stroke="#DC2626" strokeWidth={isSel ? 3 : 2} />
                  <text x={t.x} y={t.y+5} textAnchor="middle" fill="#DC2626" fontSize="14" fontWeight="700" fontFamily={F}>{t.id}</text>
                  <text x={t.x} y={t.y+26} textAnchor="middle" fill="#57534E" fontSize="10" fontFamily={F} fontWeight="500">{t.label}</text>
                  <text x={t.x} y={t.y+38} textAnchor="middle" fill="#A8A29E" fontSize="8" fontFamily={F}>280Ã—180 mm</text>
                  <text x={t.x} y={t.y+48} textAnchor="middle" fill="#A8A29E" fontSize="8" fontFamily={F}>FOV: {t.fov}Â°</text>
                  {isSel && <rect x={t.x-32} y={t.y-19} width="64" height="38" rx="9" fill="none" stroke="#DC2626" strokeWidth="1.5">
                    <animate attributeName="opacity" values="0.6;0.1;0.6" dur="1.5s" repeatCount="indefinite" />
                  </rect>}
                </g>
              );
            })}

            {/* â•â•â•â•â•â• ENV SENSOR â•â•â•â•â•â• */}
            <rect x="265" y="310" width="60" height="34" rx="6" fill="#F0FDF4" stroke="#16A34A" strokeWidth="2" />
            <text x="295" y="326" textAnchor="middle" fill="#16A34A" fontSize="11" fontFamily={F} fontWeight="700">ENV</text>
            <text x="295" y="339" textAnchor="middle" fill="#16A34A" fontSize="8" fontFamily={F}>T / RH / VOC</text>
            <text x="295" y="357" textAnchor="middle" fill="#A8A29E" fontSize="8" fontFamily={F}>Samples every 30s</text>

            {/* â•â•â•â•â•â• GATEWAY â•â•â•â•â•â• */}
            <rect x="360" y="340" width="110" height="50" rx="8" fill="#F5F3FF" stroke="#7C3AED" strokeWidth="2.5" />
            <text x="415" y="362" textAnchor="middle" fill="#7C3AED" fontSize="13" fontWeight="700" fontFamily={F}>GATEWAY</text>
            <text x="415" y="378" textAnchor="middle" fill="#7C3AED" fontSize="9" fontFamily={F}>MQTT Broker</text>
            <text x="415" y="404" textAnchor="middle" fill="#A8A29E" fontSize="9" fontFamily={F}>WiFi â†’ Cloud Â· latency &lt;50ms</text>

            {/* â•â•â•â•â•â• NETWORK LINES â•â•â•â•â•â• */}
            {[
              [285,205,415,340],
              [530,215,470,355],
              [115,455,380,390],
              [325,340,365,355],
            ].map(([x1,y1,x2,y2],i) => (
              <line key={`n${i}`} x1={x1} y1={y1} x2={x2} y2={y2} stroke="#7C3AED" strokeWidth="1" strokeDasharray="6,4" opacity="0.3">
                <animate attributeName="stroke-dashoffset" from="10" to="0" dur="1s" repeatCount="indefinite" />
              </line>
            ))}

            {/* â•â•â•â•â•â• DISTANCE LINES â•â•â•â•â•â• */}
            <line x1="307" y1="190" x2="508" y2="200" stroke="#78716C" strokeWidth="0.7" strokeDasharray="3,3" />
            <rect x="380" y="183" width="62" height="18" rx="4" fill="#fff" stroke="#D1CBC4" strokeWidth="0.8" />
            <text x="411" y="196" textAnchor="middle" fill="#57534E" fontSize="9" fontFamily={F}>2.95 m</text>

            <line x1="263" y1="200" x2="130" y2="430" stroke="#78716C" strokeWidth="0.7" strokeDasharray="3,3" />
            <rect x="162" y="308" width="62" height="18" rx="4" fill="#fff" stroke="#D1CBC4" strokeWidth="0.8" />
            <text x="193" y="321" textAnchor="middle" fill="#57534E" fontSize="9" fontFamily={F}>3.10 m</text>

            <line x1="508" y1="210" x2="137" y2="440" stroke="#78716C" strokeWidth="0.7" strokeDasharray="3,3" />
            <rect x="295" y="330" width="62" height="18" rx="4" fill="#fff" stroke="#D1CBC4" strokeWidth="0.8" />
            <text x="326" y="343" textAnchor="middle" fill="#57534E" fontSize="9" fontFamily={F}>5.20 m</text>

            {/* â•â•â•â•â•â• COMPASS â•â•â•â•â•â• */}
            <g transform="translate(610,490)">
              <circle cx="0" cy="0" r="22" fill="#FAFAF9" stroke="#D1CBC4" strokeWidth="1.2" />
              <text x="0" y="-7" textAnchor="middle" fill="#1C1917" fontSize="12" fontFamily={F} fontWeight="700">N</text>
              <polygon points="0,-17 -4,-9 4,-9" fill="#DC2626" />
              <polygon points="0,17 -4,9 4,9" fill="#D1CBC4" />
            </g>

            {/* â•â•â•â•â•â• SCALE BAR â•â•â•â•â•â• */}
            <line x1="80" y1="530" x2="194" y2="530" stroke="#1C1917" strokeWidth="2" />
            <line x1="80" y1="526" x2="80" y2="534" stroke="#1C1917" strokeWidth="1.5" />
            <line x1="194" y1="526" x2="194" y2="534" stroke="#1C1917" strokeWidth="1.5" />
            <text x="137" y="525" textAnchor="middle" fill="#1C1917" fontSize="11" fontFamily={F} fontWeight="600">1 metre</text>

            {/* â•â•â•â•â•â• LEGEND â•â•â•â•â•â• */}
            <rect x="240" y="495" width="290" height="55" rx="8" fill="#FAFAF9" stroke="#E8E4DF" strokeWidth="1" />
            <text x="255" y="513" fill="#1C1917" fontSize="10" fontWeight="700" fontFamily={F}>LEGEND</text>
            <rect x="255" y="522" width="14" height="10" rx="2" fill="#fff" stroke="#DC2626" strokeWidth="1.5" />
            <text x="275" y="531" fill="#57534E" fontSize="9" fontFamily={F}>Trap (STU)</text>
            <circle cx="337" cy="527" r="6" fill="#2563EB" opacity="0.15" stroke="#2563EB" strokeWidth="0.8" />
            <text x="349" y="531" fill="#57534E" fontSize="9" fontFamily={F}>PIR 3m</text>
            <circle cx="400" cy="527" r="6" fill="#DC2626" opacity="0.15" />
            <text x="412" y="531" fill="#57534E" fontSize="9" fontFamily={F}>Risk</text>
            <line x1="448" y1="527" x2="462" y2="527" stroke="#B45309" strokeWidth="2.5" strokeDasharray="4,2" />
            <text x="470" y="531" fill="#57534E" fontSize="9" fontFamily={F}>Pipe</text>
            <rect x="500" y="522" width="14" height="10" rx="2" fill="#F0FDF4" stroke="#16A34A" strokeWidth="1" />
            <text x="520" y="531" fill="#57534E" fontSize="9" fontFamily={F}>Sensor</text>
          </svg>

          {/* â•â•â•â•â•â• TRAP DETAIL PANEL â•â•â•â•â•â• */}
          {selected !== null && (
            <div style={{ marginTop: 16, animation: 'fadeUp 0.3s ease' }}>
              <Card style={{ borderColor: 'var(--red)', borderWidth: 2 }}>
                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 10 }}>
                  <div style={{ display: 'flex', alignItems: 'center', gap: 10 }}>
                    <span style={{ background: 'var(--red)', color: '#fff', fontFamily: "'JetBrains Mono'", fontWeight: 700, fontSize: 14, padding: '4px 12px', borderRadius: 6 }}>{traps[selected].id}</span>
                    <span style={{ fontWeight: 600, fontSize: 16 }}>{traps[selected].label}</span>
                    <span style={{ fontSize: 12, color: 'var(--text-muted)', fontFamily: "'JetBrains Mono'" }}>FOV: {traps[selected].fov}Â° Â· 280Ã—180Ã—60 mm Â· 650g</span>
                  </div>
                  <button onClick={() => setSelected(null)} style={{ background: 'var(--surface-alt)', border: '1px solid var(--border)', borderRadius: 6, padding: '5px 12px', cursor: 'pointer', fontSize: 13, fontFamily: "'JetBrains Mono'" }}>âœ•</button>
                </div>
                <p style={{ fontSize: 14, color: 'var(--text-secondary)', lineHeight: 1.6 }}>{traps[selected].reason}</p>
              </Card>
            </div>
          )}

          {/* â•â•â•â•â•â• RESPONSE TIMING SECTION â•â•â•â•â•â• */}
          <div style={{ marginTop: 24 }}>
            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 14 }}>
              <div>
                <h3 style={{ fontSize: 17, fontWeight: 700, marginBottom: 2 }}>â± Response Timeline â€” Detect to Eliminate</h3>
                <p style={{ fontSize: 13, color: 'var(--text-secondary)' }}>Full autonomous cycle completes in under 3 seconds. Click "Simulate" to step through.</p>
              </div>
              <button onClick={() => { setSimTime(0); setSimRunning(true); }} style={{
                fontFamily: "'JetBrains Mono'", fontSize: 13, fontWeight: 700,
                background: simRunning ? 'var(--surface-alt)' : 'var(--green)',
                color: simRunning ? 'var(--text-muted)' : '#fff',
                border: 'none', borderRadius: 8, padding: '8px 20px', cursor: simRunning ? 'default' : 'pointer',
              }}>
                {simRunning ? 'Runningâ€¦' : 'â–¶ Simulate'}
              </button>
            </div>

            {/* Timeline bar */}
            <div style={{ position: 'relative', marginBottom: 8 }}>
              <div style={{ height: 6, background: 'var(--surface-alt)', borderRadius: 3, overflow: 'hidden' }}>
                <div style={{ height: '100%', width: `${(simTime / 7) * 100}%`, background: 'linear-gradient(90deg, #16A34A, #2563EB, #7C3AED, #DC2626)', borderRadius: 3, transition: 'width 0.5s ease' }} />
              </div>
              <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: 4 }}>
                <span style={{ fontSize: 11, fontFamily: "'JetBrains Mono'", color: 'var(--text-muted)' }}>T+0.00s</span>
                <span style={{ fontSize: 11, fontFamily: "'JetBrains Mono'", color: 'var(--text-muted)' }}>T+2.50s</span>
              </div>
            </div>

            {/* Timeline steps */}
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: 8 }}>
              {timeline.map((s, i) => {
                const isActive = simTime === i;
                const isPast = simTime > i;
                return (
                  <div key={i} onClick={() => { setSimTime(i); setSimRunning(false); }} style={{
                    padding: '12px 10px', borderRadius: 'var(--radius)', cursor: 'pointer',
                    background: isActive ? '#fff' : isPast ? 'var(--surface-alt)' : 'var(--surface)',
                    border: `2px solid ${isActive ? s.color : 'var(--border)'}`,
                    boxShadow: isActive ? 'var(--shadow-md)' : 'none',
                    opacity: isPast && !isActive ? 0.5 : 1,
                    transition: 'all 0.3s',
                  }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: 6, marginBottom: 6 }}>
                      <span style={{ fontSize: 18 }}>{s.icon}</span>
                      <span style={{ fontFamily: "'JetBrains Mono'", fontSize: 12, fontWeight: 700, color: isActive ? s.color : 'var(--text-secondary)' }}>T+{s.t}</span>
                    </div>
                    <div style={{ fontSize: 12, fontWeight: 700, color: isActive ? s.color : 'var(--text)', marginBottom: 4 }}>{s.label}</div>
                    <div style={{ fontSize: 11, color: 'var(--text-secondary)', lineHeight: 1.5 }}>{s.desc}</div>
                  </div>
                );
              })}
            </div>

            {/* Summary stats */}
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(5, 1fr)', gap: 8, marginTop: 14 }}>
              {[
                ['PIR â†’ Camera', '200ms', '#16A34A'],
                ['ML Inference', '20ms', '#7C3AED'],
                ['Safety Gate', '40ms', '#B45309'],
                ['Kill Trigger', '740ms', '#DC2626'],
                ['Total Cycle', '2.5s', '#1C1917'],
              ].map(([label, val, col]) => (
                <div key={label} style={{ background: 'var(--surface-alt)', borderRadius: 8, padding: '10px 8px', textAlign: 'center' }}>
                  <div style={{ fontSize: 10, textTransform: 'uppercase', letterSpacing: 0.8, color: 'var(--text-muted)', fontWeight: 600, marginBottom: 4, fontFamily: "'JetBrains Mono'" }}>{label}</div>
                  <div style={{ fontSize: 18, fontWeight: 700, fontFamily: "'JetBrains Mono'", color: col }}>{val}</div>
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â• 5. KILL METHODS â•â•â•â•â•â•â•â•â•â•â• */
    function KillMethodsTab() {
      const [sel, setSel] = useState(0);
      const methods = [
        {
          name: 'Electric Field Grid', icon: 'âš¡', color: 'var(--red)', bg: 'var(--red-light)', trl: 8, rate: '99%+', speed: 'Instant', eggs: false,
          desc: 'High-voltage (1.4kV) insulated conductor grid within enclosed chamber. Cockroach contacts alternating-polarity conductors, completing circuit through body for instant neuromuscular disruption. Current limited to <5mA â€” safe even on accidental human contact.',
          specs: ['Voltage: 1,400V DC', 'Current: <5mA (human-safe)', 'Grid spacing: 4mm', 'Power: 3W standby / 8W active', 'Kill time: <100ms']
        },
        {
          name: 'IR Heat Chamber', icon: 'ğŸ”¥', color: 'var(--accent)', bg: 'var(--accent-light)', trl: 7, rate: '100%', speed: '90 sec', eggs: true,
          desc: 'Ceramic infrared heating element raises enclosed chamber to 70Â°C. The only method that kills all life stages including eggs within oothecae (egg cases). Also denatures allergen proteins and sanitises. Insulated housing keeps external surface below 40Â°C.',
          specs: ['Target temp: 68â€“71Â°C', 'Element: Ceramic IR', 'Chamber: Insulated steel', 'Power: 12W peak', 'Egg kill rate: 100%']
        },
        {
          name: 'Cold Plasma', icon: 'ğŸŒ©ï¸', color: 'var(--blue)', bg: 'var(--blue-light)', trl: 4, rate: '95â€“100%', speed: '10â€“30s', eggs: true,
          desc: 'Dielectric barrier discharge generates ionized gas with reactive oxygen/nitrogen species (Oâ‚ƒ, OHâ€¢, NOâ‚‚) at near room temperature. Destroys cellular structure through oxidative damage. Additionally sterilises surviving adults with up to 75% fertility reduction.',
          specs: ['Generator: DBD reactor', 'Gas source: Ambient air', 'Temp: Near-ambient', 'ROS/RNS output: Oâ‚ƒ, OHâ€¢, NOâ‚‚', 'Power: 40â€“60W pulsed']
        },
        {
          name: 'Vacuum Capture', icon: 'ğŸŒ€', color: 'var(--purple)', bg: 'var(--purple-light)', trl: 6, rate: '95%+', speed: 'Instant', eggs: false,
          desc: 'High-speed centrifugal fan creates localised suction activated by AI vision when cockroach is within 30cm of intake. Insect is pulled through 25mm intake into kill chamber where EF grid completes elimination. 15mm mesh guard prevents non-insect capture.',
          specs: ['Fan speed: 4,600 RPM', 'Airflow: 900 mÂ³/h', 'Intake diameter: 25mm', 'Guard mesh: 15mm', 'Trigger range: 30cm']
        },
      ];

      const m = methods[sel];

      return (
        <div>
          <h2 style={{ fontSize: 20, fontWeight: 700, marginBottom: 4 }}>Kill Methods â€” Detailed Comparison</h2>
          <p style={{ color: 'var(--text-secondary)', fontSize: 14, marginBottom: 16 }}>Four elimination technologies operating in configurable cascade sequence.</p>

          <div style={{ display: 'flex', gap: 8, marginBottom: 20, flexWrap: 'wrap' }}>
            {methods.map((mt, i) => (
              <button key={i} onClick={() => setSel(i)} style={{
                fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 600,
                background: sel === i ? mt.bg : 'var(--surface)',
                color: sel === i ? mt.color : 'var(--text-secondary)',
                border: `1.5px solid ${sel === i ? mt.color : 'var(--border)'}`,
                padding: '10px 16px', borderRadius: 10, cursor: 'pointer',
                display: 'flex', alignItems: 'center', gap: 8, transition: 'all 0.3s',
              }}>
                <span style={{ fontSize: 18 }}>{mt.icon}</span> {mt.name}
              </button>
            ))}
          </div>

          <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16 }}>
            {/* Left: description */}
            <Card>
              <div style={{ fontSize: 36, marginBottom: 12 }}>{m.icon}</div>
              <h3 style={{ fontSize: 16, fontWeight: 700, marginBottom: 8, color: m.color }}>{m.name}</h3>
              <p style={{ fontSize: 13, color: 'var(--text-secondary)', lineHeight: 1.65, marginBottom: 20 }}>{m.desc}</p>
              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 10 }}>
                {[
                  ['Kill Rate', m.rate, m.color],
                  ['Speed', m.speed, m.color],
                  ['TRL Level', `${m.trl}/9`, m.color],
                  ['Kills Eggs?', m.eggs ? 'âœ… Yes' : 'âŒ No', m.eggs ? 'var(--green)' : 'var(--red)'],
                ].map(([label, val, c], i) => (
                  <div key={i} style={{ background: 'var(--surface-alt)', borderRadius: 8, padding: 10 }}>
                    <div style={{ fontSize: 10, textTransform: 'uppercase', letterSpacing: 1, color: 'var(--text-muted)', fontWeight: 600 }}>{label}</div>
                    <div style={{ fontSize: 18, fontWeight: 700, fontFamily: "'JetBrains Mono'", color: c, marginTop: 2 }}>{val}</div>
                  </div>
                ))}
              </div>
            </Card>

            {/* Right: specs */}
            <Card>
              <h4 style={{ fontSize: 13, fontWeight: 700, fontFamily: "'JetBrains Mono'", color: m.color, marginBottom: 14, textTransform: 'uppercase', letterSpacing: 1 }}>Technical Specs</h4>
              {m.specs.map((s, i) => (
                <div key={i} style={{ display: 'flex', alignItems: 'center', gap: 10, marginBottom: 12 }}>
                  <div style={{ width: 6, height: 6, borderRadius: '50%', background: m.color, flexShrink: 0 }} />
                  <span style={{ fontSize: 13, fontFamily: "'JetBrains Mono'", color: 'var(--text-secondary)' }}>{s}</span>
                </div>
              ))}

              <div style={{ marginTop: 20, padding: 14, background: 'var(--green-light)', borderRadius: 8, border: '1px solid #BBF7D0' }}>
                <div style={{ fontSize: 11, fontWeight: 700, color: 'var(--green)', fontFamily: "'JetBrains Mono'", marginBottom: 6 }}>ğŸ”’ Safety Rating</div>
                <div style={{ display: 'flex', gap: 3 }}>
                  {[1,2,3,4,5].map(s => <span key={s} style={{ color: s <= (m.trl >= 7 ? 5 : 4) ? 'var(--accent)' : 'var(--border)', fontSize: 16 }}>â˜…</span>)}
                </div>
                <div style={{ fontSize: 11, color: 'var(--text-secondary)', marginTop: 6, lineHeight: 1.5 }}>Fully enclosed chamber Â· Auto-disable on lid removal Â· Pet-size thermal interlock Â· Hardware fail-safe (normally-open relays)</div>
              </div>

              <div style={{ marginTop: 12, padding: 14, background: 'var(--accent-light)', borderRadius: 8, border: '1px solid #FDE68A' }}>
                <div style={{ fontSize: 11, fontWeight: 700, color: 'var(--accent)', fontFamily: "'JetBrains Mono'", marginBottom: 6 }}>âš¡ AI Trigger Condition</div>
                <div style={{ fontSize: 11, color: 'var(--text-secondary)', lineHeight: 1.5 }}>Activates ONLY when CNN model confirms cockroach at &gt;95% confidence AND safety interlock confirms zero pets/humans in exclusion zone.</div>
              </div>
            </Card>
          </div>
        </div>
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â• MAIN APP â•â•â•â•â•â•â•â•â•â•â• */
    function App() {
      const [tab, setTab] = useState(0);

      return (
        <div style={{ maxWidth: 820, margin: '0 auto', padding: '32px 20px 60px' }}>
          {/* Header */}
          <header style={{ marginBottom: 32, textAlign: 'center' }}>
            <p style={{ fontSize: 11, letterSpacing: 3, textTransform: 'uppercase', color: 'var(--accent)', fontWeight: 700, fontFamily: "'JetBrains Mono'", marginBottom: 8 }}>Technical Overview</p>
            <h1 style={{ fontSize: 30, fontWeight: 700, color: 'var(--text)', lineHeight: 1.25, marginBottom: 6 }}>Smart Pest Elimination System</h1>
            <p style={{ fontSize: 15, color: 'var(--text-secondary)', maxWidth: 560, margin: '0 auto' }}>IoT + AI/ML hybrid architecture for autonomous, chemical-free cockroach detection and elimination â€” safe for humans and pets.</p>
          </header>

          {/* Stats bar */}
          <Card style={{ marginBottom: 24 }}>
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: 16 }}>
              <Stat label="Unit Cost" value="~Â£350" sub="per trap unit" color="var(--text)" />
              <Stat label="Detection" value="98.9%" sub="YOLOv8 + multi-sensor" color="var(--blue)" />
              <Stat label="Kill Rate" value="99.5%" sub="3-layer cascade" color="var(--red)" />
              <Stat label="Latency" value="<3s" sub="detect â†’ eliminate" color="var(--green)" />
            </div>
          </Card>

          {/* Tabs */}
          <div style={{ display: 'flex', gap: 6, marginBottom: 24, overflowX: 'auto', paddingBottom: 4 }}>
            {TABS.map((t, i) => <TabButton key={i} label={t} active={tab === i} onClick={() => setTab(i)} index={i} />)}
          </div>

          {/* Tab content */}
          <Card style={{ animation: 'fadeUp 0.35s ease' }} key={tab}>
            {tab === 0 && <OverviewTab />}
            {tab === 1 && <TrapUnitTab />}
            {tab === 2 && <DetectionTab />}
            {tab === 3 && <FloorPlanTab />}
            {tab === 4 && <KillMethodsTab />}
          </Card>

          {/* Footer */}
          <footer style={{ textAlign: 'center', marginTop: 32, padding: '16px 0', borderTop: '1px solid var(--border)' }}>
            <p style={{ fontSize: 12, color: 'var(--text-muted)', fontFamily: "'JetBrains Mono'" }}>Patent Pending Â· Chemical-Free Â· IoT Connected Â· AI-Driven Safety</p>
          </footer>
        </div>
      );
    }

    ReactDOM.render(React.createElement(App), document.getElementById('root'));
  </script>
</body>
</html>
